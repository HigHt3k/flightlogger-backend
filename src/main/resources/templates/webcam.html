<!DOCTYPE html>
<html>
<head>
  <title>Webcam Capture</title>
</head>
<body>
<h1>Webcam Capture</h1>

<div id="webcam-container">
  <canvas id="webcam-canvas" style="display: none;"></canvas>
</div>

<button id="capture-button">Capture Image</button>
<img id="captured-image" src="#" alt="Captured Image" style="display: none;">

<script>
  // Get the necessary DOM elements
  const videoElement = document.getElementById('webcam-video');
  const canvasElement = document.getElementById('webcam-canvas');
  const captureButton = document.getElementById('capture-button');
  const capturedImage = document.getElementById('captured-image');

  // Check for browser support for getUserMedia
  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
    // Get access to the webcam stream
    navigator.mediaDevices.getUserMedia({ video: true })
            .then(function(stream) {
              videoElement.srcObject = stream;
            })
            .catch(function(error) {
              console.error('Error accessing webcam:', error);
            });
  } else {
    console.error('getUserMedia is not supported by this browser');
  }

  // Capture image from the video stream when the button is clicked
  captureButton.addEventListener('click', function() {
    // Draw the current video frame onto the canvas
    canvasElement.width = videoElement.videoWidth;
    canvasElement.height = videoElement.videoHeight;
    canvasElement.getContext('2d').drawImage(videoElement, 0, 0, canvasElement.width, canvasElement.height);

    // Convert canvas to image data URL
    const imageDataURL = canvasElement.toDataURL('image/png');

    // Send the image data to the endpoint
    sendImageData(imageDataURL);
  });

  // Function to send the image data to the endpoint
  function sendImageData(imageData) {
    // Create an AJAX request or use the Fetch API to send the data
    // Replace 'your-endpoint-url' with the actual endpoint URL
    fetch('webcam/capture', {
      method: 'POST',
      body: JSON.stringify({ imageData: imageData }),
      headers: {
        'Content-Type': 'application/json'
      }
    })
            .then(response => response.json())
            .then(data => {
              // Handle the response from the server if needed
              console.log(data);
            })
            .catch(error => {
              console.error('Error sending image data:', error);
            });
  }

</script>
</body>
</html>
